# Team Development Guide

## Overview
This document outlines best practices for team development on the Android Video Converter project.

## ✅ Git Workflow

### 1. **Always Pull Before Starting Work**
```bash
git checkout dev
git pull origin dev
flutter pub get
flutter clean
flutter pub get
```

### 2. **Create Feature Branches**
```bash
git checkout -b feature/your-feature-name
# Work on your feature
git add .
git commit -m "feat: describe your changes"
git push origin feature/your-feature-name
```

### 3. **Merge Strategy**
- Always create Pull Requests to `dev` branch
- Require at least 1 code review before merging
- Use squash merges to keep history clean
- Delete feature branches after merging

## 🚫 Files That Should NEVER Be Committed

The updated `.gitignore` now excludes these problematic files:

### **Gradle Cache Files** (Major Conflict Source)
- `android/.gradle/` - Build cache and metadata
- `**/checksums/` - Build verification files
- `**/executionHistory/` - Build execution logs
- `**/fileHashes/` - File change tracking
- `**/buildOutputCleanup/` - Build artifact tracking

### **Generated Files**
- `GeneratedPluginRegistrant.java` - Auto-generated by Flutter
- `pubspec.lock` - May cause conflicts with different Flutter versions

### **Platform-Specific Files**
- `android/local.properties` - Contains local SDK paths
- `android/key.properties` - Contains signing keys (security risk!)

## 🔧 Setup Instructions for New Team Members

### 1. **Initial Clone**
```bash
git clone [repository-url]
cd android-video-converter
git checkout dev
```

### 2. **Flutter Setup**
```bash
flutter doctor
flutter pub get
flutter clean
flutter pub get
```

### 3. **Android Setup**
```bash
# Create android/local.properties (this file is gitignored)
echo "sdk.dir=/path/to/your/Android/Sdk" > android/local.properties
echo "flutter.sdk=/path/to/your/flutter" >> android/local.properties
```

### 4. **First Build**
```bash
flutter clean
flutter pub get
flutter run --debug
```

## 🛠️ Common Issues & Solutions

### **"Gradle files conflict" or "Build failed"**
```bash
# Clean everything
flutter clean
cd android && ./gradlew clean && cd ..
flutter pub get
rm -rf android/.gradle/
flutter run
```

### **"Plugin registration errors"**
```bash
# Regenerate plugin files
flutter clean
flutter pub get
flutter pub deps
flutter run
```

### **"File already exists" errors during pull**
```bash
# Reset problematic cache files
git checkout -- android/.gradle/
git clean -fd android/.gradle/
git pull
```

## 📝 Commit Message Convention

Use conventional commits:
- `feat:` - New features
- `fix:` - Bug fixes
- `refactor:` - Code restructuring
- `style:` - UI/UX improvements
- `docs:` - Documentation changes
- `test:` - Adding tests
- `chore:` - Maintenance tasks

Example:
```
feat: add video thumbnail generation with caching

- Implement thumbnail service with video_thumbnail package
- Add thumbnail caching to improve performance
- Update home screen to display video previews
- Add settings toggle for thumbnail vs icon display
```

## 🔒 Security Guidelines

### **Never Commit These:**
- API keys
- Signing keys (`key.properties`)
- Local paths (`local.properties`)
- Personal credentials
- Build artifacts (`.apk`, `.aab`)

### **Environment Variables**
Create `android/key.properties` for release builds:
```properties
storePassword=your_store_password
keyPassword=your_key_password
keyAlias=your_key_alias
storeFile=path_to_keystore.jks
```

## 📱 Testing Strategy

### **Before Committing:**
1. Run `flutter analyze` - Check for code issues
2. Run `flutter test` - Run unit tests
3. Test on physical device
4. Verify app builds: `flutter build apk --debug`

### **CI/CD Integration (Recommended)**
Consider setting up GitHub Actions for:
- Automated testing on pull requests
- Build verification
- Code quality checks

## 🔄 Dependency Management

### **Adding New Dependencies:**
```bash
flutter pub add package_name
# Commit pubspec.yaml but NOT pubspec.lock in most cases
git add pubspec.yaml
git commit -m "deps: add package_name for feature_description"
```

### **Updating Dependencies:**
```bash
flutter pub upgrade
# Test thoroughly before committing lock file
flutter test
flutter build apk --debug
git add pubspec.lock pubspec.yaml
git commit -m "deps: update dependencies"
```

## 🚀 Release Process

### **Development to Main:**
1. Ensure all features are tested on `dev`
2. Create release PR from `dev` to `main`
3. Update version in `pubspec.yaml`
4. Create release tag
5. Build release APK

### **Version Bumping:**
```yaml
# In pubspec.yaml
version: 1.0.0+1  # semantic_version+build_number
```

## 🏗️ Project Structure

```
lib/
├── core/
│   └── constants/       # App-wide constants
├── data/
│   ├── models/         # Data models
│   └── services/       # Business logic services
├── presentation/
│   ├── screens/        # Main app screens
│   └── widgets/        # Reusable UI components
└── main.dart           # App entry point

android/                # Android-specific code
├── app/
│   ├── src/main/
│   └── build.gradle
├── gradle/
├── local.properties    # LOCAL ONLY - not committed
└── key.properties      # LOCAL ONLY - not committed
```

## 📞 Communication

### **Before Major Changes:**
- Discuss architecture changes in team chat
- Review PRs thoroughly
- Test on multiple devices when possible
- Document breaking changes

### **Code Review Checklist:**
- [ ] Follows coding conventions
- [ ] Includes appropriate error handling
- [ ] Performance considerations addressed
- [ ] UI/UX is consistent with app design
- [ ] No security vulnerabilities
- [ ] Proper git history (atomic commits)

---

## Quick Reference Commands

```bash
# Setup
flutter pub get && flutter clean && flutter run

# Clean build
flutter clean && cd android && ./gradlew clean && cd .. && flutter run

# Check for issues
flutter doctor && flutter analyze

# Team sync
git checkout dev && git pull && flutter pub get && flutter clean
```